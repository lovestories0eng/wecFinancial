!function(e){"use strict";"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";var t;function n(e){var t,n,c,i,r,a,s,l,d,p,u=this;function h(t,n,c){var i,r,a,s,l,d,p,b=n,f=!0,A=b.caseSensitive,g=b.regExp,x=b.wholeWord;(g||x)&&(n.wholeWord&&(t="\\b"+t+"\\b"),t=RegExp(t)),p=b.backwards?b.skipCurrent?"from":"to":b.skipCurrent?"to":"from",d=e.getCursor(p),s=(a=e.getSearchCursor(t,d,!A)).findNext.bind(a),l=a.findPrevious.bind(a),a.matches.bind(a),b.backwards&&!l()?(f=s())&&(e.setCursor(e.doc.size-1,0),h(!0,!0,c),i=!0):b.backwards||s()||(f=l())&&(e.setCursor(0,0),h(!0,!1,c),i=!0),r=!f&&u.searchInput.value,o(u.searchBox,"ace_nomatch",r),!i&&f&&c(a)}t=u.element=function(){var e,t=document.querySelector(".CodeMirror"),n=document.createElement("div"),o=['<div class="ace_search right">','<button type="button" action="hide" class="ace_searchbtn_close"></button>','<div class="ace_search_form">','<input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>','<button type="button" action="findNext" class="ace_searchbtn next"></button>','<button type="button" action="findPrev" class="ace_searchbtn prev"></button>','<button type="button" action="findAll" class="ace_searchbtn" title="Alt-Enter">All</button>',"</div>",'<div class="ace_replace_form">','<input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>','<button type="button" action="replaceAndFindNext" class="ace_replacebtn">Replace</button>','<button type="button" action="replaceAll" class="ace_replacebtn">All</button>',"</div>",'<div class="ace_search_options">','<span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>','<span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>','<span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>',"</div>","</div>"].join("");return n.innerHTML=o,e=n.firstChild,t.parentElement.appendChild(e),e}(),d=document.createElement("style"),p=[".ace_search {","background-color: #ddd;","border: 1px solid #cbcbcb;","border-top: 0 none;","max-width: 325px;","overflow: hidden;","margin: 0;","padding: 4px;","padding-right: 6px;","padding-bottom: 0;","position: absolute;","top: 0px;","z-index: 99;","white-space: normal;","}",".ace_search.left {","border-left: 0 none;","border-radius: 0px 0px 5px 0px;","left: 0;","}",".ace_search.right {","border-radius: 0px 0px 0px 5px;","border-right: 0 none;","right: 0;","}",".ace_search_form, .ace_replace_form {","border-radius: 3px;","border: 1px solid #cbcbcb;","float: left;","margin-bottom: 4px;","overflow: hidden;","}",".ace_search_form.ace_nomatch {","outline: 1px solid red;","}",".ace_search_field {","background-color: white;","border-right: 1px solid #cbcbcb;","border: 0 none;","-webkit-box-sizing: border-box;","-moz-box-sizing: border-box;","box-sizing: border-box;","float: left;","height: 22px;","outline: 0;","padding: 0 7px;","width: 214px;","margin: 0;","}",".ace_searchbtn,",".ace_replacebtn {","background: #fff;","border: 0 none;","border-left: 1px solid #dcdcdc;","cursor: pointer;","float: left;","height: 22px;","margin: 0;","padding: 0;","position: relative;","}",".ace_searchbtn:last-child,",".ace_replacebtn:last-child {","border-top-right-radius: 3px;","border-bottom-right-radius: 3px;","}",".ace_searchbtn:disabled {","background: none;","cursor: default;","}",".ace_searchbtn {","background-position: 50% 50%;","background-repeat: no-repeat;","width: 27px;","}",".ace_searchbtn.prev {","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    ","}",".ace_searchbtn.next {","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    ","}",".ace_searchbtn_close {","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;","border-radius: 50%;","border: 0 none;","color: #656565;","cursor: pointer;","float: right;","font: 16px/16px Arial;","height: 14px;","margin: 5px 1px 9px 5px;","padding: 0;","text-align: center;","width: 14px;","}",".ace_searchbtn_close:hover {","background-color: #656565;","background-position: 50% 100%;","color: white;","}",".ace_replacebtn.prev {","width: 54px","}",".ace_replacebtn.next {","width: 27px","}",".ace_button {","margin-left: 2px;","cursor: pointer;","-webkit-user-select: none;","-moz-user-select: none;","-o-user-select: none;","-ms-user-select: none;","user-select: none;","overflow: hidden;","opacity: 0.7;","border: 1px solid rgba(100,100,100,0.23);","padding: 1px;","-moz-box-sizing: border-box;","box-sizing:    border-box;","color: black;","}",".ace_button:hover {","background-color: #eee;","opacity:1;","}",".ace_button:active {","background-color: #ddd;","}",".ace_button.checked {","border-color: #3399ff;","opacity:1;","}",".ace_search_options{","margin-bottom: 3px;","text-align: right;","-webkit-user-select: none;","-moz-user-select: none;","-o-user-select: none;","-ms-user-select: none;","user-select: none;","}"].join(""),d.setAttribute("data-name","js-searchbox"),d.textContent=p,document.head.appendChild(d),function(e){u.searchBox=e.querySelector(".ace_search_form"),u.replaceBox=e.querySelector(".ace_replace_form"),u.searchOptions=e.querySelector(".ace_search_options"),u.regExpOption=e.querySelector("[action=toggleRegexpMode]"),u.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),u.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),u.searchInput=u.searchBox.querySelector(".ace_search_field"),u.replaceInput=u.replaceBox.querySelector(".ace_search_field")}(t),s=u,l={"Ctrl-F|Cmd-F|Ctrl-H|Command-Alt-F":function(){var e=s.isReplace=!s.isReplace;s.replaceBox.style.display=e?"":"none",s[e?"replaceInput":"searchInput"].focus()},"Ctrl-G|Cmd-G":function(){s.findNext()},"Ctrl-Shift-G|Cmd-Shift-G":function(){s.findPrev()},Esc:function(){setTimeout((function(){s.hide()}))},Enter:function(){s.activeInput===s.replaceInput&&s.replace(),s.findNext()},"Shift-Enter":function(){s.activeInput===s.replaceInput&&s.replace(),s.findPrev()},"Alt-Enter":function(){s.activeInput===s.replaceInput&&s.replaceAll(),s.findAll()},Tab:function(){u.activeInput===u.replaceInput?u.searchInput.focus():u.replaceInput.focus()}},u.element.addEventListener("keydown",(function(e){Object.keys(l).some((function(t){var n=function(e,t){var n,o={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,UP:38,DOWN:40,INSERT:45,DELETE:46,INSERT_MAC:96,ASTERISK:106,PLUS:107,MINUS:109,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,SLASH:191,TRA:192,BACKSLASH:220};return function(e,t){if("string"!=typeof e)throw Error("str should be string!");if("object"!=typeof t)throw Error("event should be object!")}(e,t),n=e.split("|").some((function(e){var n;return n=e.split("-").some((function(e){var n;switch(e){case"Ctrl":n=t.ctrlKey;break;case"Shift":n=t.shiftKey;break;case"Alt":n=t.altKey;break;case"Cmd":n=t.metaKey;break;default:1===e.length?n=t.keyCode===e.charCodeAt(0):Object.keys(o).some((function(c){e.toUpperCase()===c&&(n=t.keyCode===o[c])}))}return!n})),!n})),n}(t,e);return n&&(e.stopPropagation(),e.preventDefault(),l[t](e)),n}))})),t.addEventListener("mousedown",(function(e){setTimeout((function(){u.activeInput.focus()}),0),e.stopPropagation()})),t.addEventListener("click",(function(e){var t=(e.target||e.srcElement).getAttribute("action");t&&u[t]?u[t]():u.commands[t]&&u.commands[t](),e.stopPropagation()})),u.searchInput.addEventListener("input",(function(){u.$onChange.schedule(20)})),u.searchInput.addEventListener("focus",(function(){u.activeInput=u.searchInput})),u.replaceInput.addEventListener("focus",(function(){u.activeInput=u.replaceInput})),u.$onChange=(n=function(){u.find(!1,!1)},r=function(){i=null,n()},(a=function(e){i||(i=setTimeout(r,e||c))}).delay=function(e){i&&clearTimeout(i),i=setTimeout(r,e||c)},a.schedule=a,a.call=function(){this.cancel(),n()},a.cancel=function(){i&&clearTimeout(i),i=null},a.isPending=function(){return i},a),this.commands={toggleRegexpMode:function(){u.regExpOption.checked=!u.regExpOption.checked,u.$syncOptions()},toggleCaseSensitive:function(){u.caseSensitiveOption.checked=!u.caseSensitiveOption.checked,u.$syncOptions()},toggleWholeWords:function(){u.wholeWordOption.checked=!u.wholeWordOption.checked,u.$syncOptions()}},this.$syncOptions=function(){o(this.regExpOption,"checked",this.regExpOption.checked),o(this.wholeWordOption,"checked",this.wholeWordOption.checked),o(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked),this.find(!1,!1)},this.find=function(t,n){h(this.searchInput.value,{skipCurrent:t,backwards:n,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked},(function(t){var n=t.matches(!1,t.from());e.setSelection(n.from,n.to)}))},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var t=this.searchInput.value,n=this.searchInput.value;o(this.searchBox,"ace_nomatch",n),e.showMatchesOnScrollbar&&e.showMatchesOnScrollbar(t),this.hide()},this.replace=function(){e.getOption("readOnly")||e.replaceSelection(this.replaceInput.value,"start")},this.replaceAndFindNext=function(){e.getOption("readOnly")||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){var t,n,o=this.searchInput.value,c=this.replaceInput.value,i=RegExp(o,"g");e.getOption("readOnly")||(n=e.getCursor(),t=(t=e.getValue()).replace(i,c),e.setValue(t),e.setCursor(n))},this.hide=function(){this.element.style.display="none",e.focus()},this.isVisible=function(){return""===this.element.style.display},this.show=function(e,t){this.element.style.display="",this.replaceBox.style.display=t?"":"none",this.isReplace=t,e&&(this.searchInput.value=e),this.searchInput.focus(),this.searchInput.select()},this.isFocused=function(){var e=document.activeElement;return e===this.searchInput||e===this.replaceInput}}function o(e,t,n){e.classList[n?"add":"remove"](t)}e.defineOption("searchbox",!1,(function(e){e.addKeyMap({"Ctrl-F":function(){t||(t=new n(e)),t.show()},Esc:function(){return t&&t.isVisible()&&(t.hide(),"undefined"!=typeof event&&event.stopPropagation()),!1},"Cmd-F":function(){t||(t=new n(e)),t.show()}})}))}));