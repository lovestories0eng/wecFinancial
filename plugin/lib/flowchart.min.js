!function(){function t(t,i,e){var r,s,o="M{0},{1}";for(r=2,s=2*e.length+2;s>r;r+=2)o+=" L{"+r+"},{"+(r+1)+"}";var n=[i.x,i.y];for(r=0,s=e.length;s>r;r++)n.push(e[r].x),n.push(e[r].y);var h=t.paper.path(o,n);h.attr("stroke",t.options["element-color"]),h.attr("stroke-width",t.options["line-width"]);var a=t.options.font,x=t.options["font-family"],l=t.options["font-weight"];return a&&h.attr({font:a}),x&&h.attr({"font-family":x}),l&&h.attr({"font-weight":l}),h}function i(t,i,e,r){var s,o;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);var n="M{0},{1}";for(s=2,o=2*e.length+2;o>s;s+=2)n+=" L{"+s+"},{"+(s+1)+"}";var h=[i.x,i.y];for(s=0,o=e.length;o>s;s++)h.push(e[s].x),h.push(e[s].y);var a=t.paper.path(n,h);a.attr({stroke:t.options["line-color"],"stroke-width":t.options["line-width"],"arrow-end":t.options["arrow-end"]});var x=t.options.font,l=t.options["font-family"],y=t.options["font-weight"];if(x&&a.attr({font:x}),l&&a.attr({"font-family":l}),y&&a.attr({"font-weight":y}),r){var g=t.paper.text(0,0,r),f=!1,p=e[0];i.y===p.y&&(f=!0);var c=0,d=0;c=i.x,d=i.y,f?(c+=t.options["text-margin"]/2,d-=t.options["text-margin"]):(c+=t.options["text-margin"]/2,d+=t.options["text-margin"]),g.attr({"text-anchor":"start","font-size":t.options["font-size"],fill:t.options["font-color"],x:c,y:d}),x&&g.attr({font:x}),l&&g.attr({"font-family":l}),y&&g.attr({"font-weight":y})}return a}function e(t,i,e,r,s,o,n,h){var a,x,l,y,g={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(a=(h-o)*(e-t)-(n-s)*(r-i))||(y=(e-t)*(x=i-o)-(r-i)*(l=t-s),x=((n-s)*x-(h-o)*l)/a,l=y/a,g.x=t+x*(e-t),g.y=i+x*(r-i),x>0&&1>x&&(g.onLine1=!0),l>0&&1>l&&(g.onLine2=!0)),g}function r(t,i){i=i||{},this.paper=new Raphael(t),this.options=f.defaults(i,g),this.symbols=[],this.lines=[],this.start=null}function s(t,i,e){this.chart=t,this.group=this.chart.paper.set(),this.symbol=e,this.connectedTo=[],this.symbolType=i.symbolType,this.flowstate=i.flowstate||"future",this.next_direction=i.next&&i.direction_next?i.direction_next:void 0,this.text=this.chart.paper.text(0,0,i.text),i.key&&(this.text.node.id=i.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var r=this.getAttr("font"),s=this.getAttr("font-family"),o=this.getAttr("font-weight");r&&this.text.attr({font:r}),s&&this.text.attr({"font-family":s}),o&&this.text.attr({"font-weight":o}),i.link&&this.text.attr("href",i.link),i.target&&this.text.attr("target",i.target);var n=this.getAttr("maxWidth");if(n){for(var h=i.text.split(" "),a="",x=0,l=h.length;l>x;x++){var y=h[x];this.text.attr("text",a+" "+y),a+=this.text.getBBox().width>n?"\n"+y:" "+y}this.text.attr("text",a.substring(1))}if(this.group.push(this.text),e){var g=this.getAttr("text-margin");e.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*g,height:this.text.getBBox().height+2*g}),e.node.setAttribute("class",this.getAttr("class")),i.link&&e.attr("href",i.link),i.target&&e.attr("target",i.target),i.key&&(e.node.id=i.key),this.group.push(e),e.insertBefore(this.text),this.text.attr({y:e.getBBox().height/2}),this.initialize()}}function o(t,i){var e=t.paper.rect(0,0,0,0,20);(i=i||{}).text=i.text||"Start",s.call(this,t,i,e)}function n(t,i){var e=t.paper.rect(0,0,0,0,20);(i=i||{}).text=i.text||"End",s.call(this,t,i,e)}function h(t,i){var e=t.paper.rect(0,0,0,0);i=i||{},s.call(this,t,i,e)}function a(t,i){var e=t.paper.rect(0,0,0,0);i=i||{},s.call(this,t,i,e),e.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var r=t.paper.rect(0,0,0,0);r.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),i.key&&(r.node.id=i.key+"i");var o=this.getAttr("font"),n=this.getAttr("font-family"),h=this.getAttr("font-weight");o&&r.attr({font:o}),n&&r.attr({"font-family":n}),h&&r.attr({"font-weight":h}),i.link&&r.attr("href",i.link),i.target&&r.attr("target",i.target),this.group.push(r),r.insertBefore(this.text),this.initialize()}function x(i,e){e=e||{},s.call(this,i,e),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var r=this.text.getBBox().width+4*this.textMargin,o=this.text.getBBox().height+2*this.textMargin,n=this.textMargin,h=o/2,a=t(i,{x:n,y:h},[{x:n-this.textMargin,y:o},{x:n-this.textMargin+r,y:o},{x:n-this.textMargin+r+2*this.textMargin,y:0},{x:n-this.textMargin+2*this.textMargin,y:0},{x:n,y:h}]);a.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&a.attr("href",e.link),e.target&&a.attr("target",e.target),e.key&&(a.node.id=e.key),a.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:a.getBBox().height/2}),this.group.push(a),a.insertBefore(this.text),this.initialize()}function l(i,e){e=e||{},s.call(this,i,e),this.textMargin=this.getAttr("text-margin"),this.yes_direction="bottom",this.no_direction="right",e.yes&&e.direction_yes&&e.no&&!e.direction_no?"right"===e.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):e.yes&&!e.direction_yes&&e.no&&e.direction_no?"right"===e.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right"),this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var r=this.text.getBBox().width+3*this.textMargin;r+=r/2;var o=this.text.getBBox().height+2*this.textMargin;o+=o/2;var n=r/4,h=(o=Math.max(.5*r,o))/4;this.text.attr({x:n+this.textMargin/2});var a=t(i,{x:n,y:h},[{x:n-r/4,y:h+o/4},{x:n-r/4+r/2,y:h+o/4+o/2},{x:n-r/4+r,y:h+o/4},{x:n-r/4+r/2,y:h+o/4-o/2},{x:n-r/4,y:h+o/4}]);a.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&a.attr("href",e.link),e.target&&a.attr("target",e.target),e.key&&(a.node.id=e.key),a.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:a.getBBox().height/2}),this.group.push(a),a.insertBefore(this.text),this.initialize()}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null===this)throw new TypeError;var i=Object(this),e=i.length>>>0;if(0===e)return-1;var r=0;if(arguments.length>0&&((r=Number(arguments[1]))!=r?r=0:0!==r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=e)return-1;for(var s=r>=0?r:Math.max(e-Math.abs(r),0);e>s;s++)if(s in i&&i[s]===t)return s;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null===this)throw new TypeError;var i=Object(this),e=i.length>>>0;if(0===e)return-1;var r=e;arguments.length>1&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!=1/0&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var s=r>=0?Math.min(r,e-1):e-Math.abs(r);s>=0;s--)if(s in i&&i[s]===t)return s;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var y={};"undefined"!=typeof module&&module.exports?module.exports=y:this.flowchart=this.flowchart||y;var g={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",class:"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},f={defaults:function t(i,e){if(!i||"function"==typeof i)return e;var r={};for(var s in e)r[s]=e[s];for(s in i)i[s]&&(r[s]="object"==typeof r[s]?t(r[s],i[s]):i[s]);return r},inherits:function(t,i){if("function"==typeof Object.create)t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=i;var e=function(){};e.prototype=i.prototype,t.prototype=new e,t.prototype.constructor=t}}};r.prototype.handle=function(t){this.symbols.indexOf(t)<=-1&&this.symbols.push(t);var i=this;return t instanceof l?(t.yes=function(e){return t.yes_symbol=e,t.no_symbol&&(t.pathOk=!0),i.handle(e)},t.no=function(e){return t.no_symbol=e,t.yes_symbol&&(t.pathOk=!0),i.handle(e)}):t.then=function(e){return t.next=e,t.pathOk=!0,i.handle(e)},t},r.prototype.startWith=function(t){return this.start=t,this.handle(t)},r.prototype.render=function(){var t,i=0,e=0,r=0,s=0,o=0,n=0;for(r=0,s=this.symbols.length;s>r;r++)(t=this.symbols[r]).width>i&&(i=t.width),t.height>e&&(e=t.height);for(r=0,s=this.symbols.length;s>r;r++)(t=this.symbols[r]).shiftX(this.options.x+(i-t.width)/2+this.options["line-width"]),t.shiftY(this.options.y+(e-t.height)/2+this.options["line-width"]);for(this.start.render(),r=0,s=this.symbols.length;s>r;r++)(t=this.symbols[r]).renderLines();for(o=this.maxXFromLine,r=0,s=this.symbols.length;s>r;r++){var h=(t=this.symbols[r]).getX()+t.width,a=t.getY()+t.height;h>o&&(o=h),a>n&&(n=a)}this.paper.setSize(o+this.options["line-width"],n+this.options["line-width"])},r.prototype.clean=function(){if(this.paper){var t=this.paper.canvas;t.parentNode.removeChild(t)}},s.prototype.getAttr=function(t){if(this.chart){var i,e=this.chart.options?this.chart.options[t]:void 0,r=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][t]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(i=this.chart.options.flowstate[this.flowstate][t]),i||r||e}},s.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},s.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},s.prototype.getX=function(){return this.group.getBBox().x},s.prototype.getY=function(){return this.group.getBBox().y},s.prototype.shiftX=function(t){this.group.transform("t"+(this.getX()+t)+","+this.getY())},s.prototype.setX=function(t){this.group.transform("t"+t+","+this.getY())},s.prototype.shiftY=function(t){this.group.transform("t"+this.getX()+","+(this.getY()+t))},s.prototype.setY=function(t){this.group.transform("t"+this.getX()+","+t)},s.prototype.getTop=function(){var t=this.getY();return{x:this.getX()+this.width/2,y:t}},s.prototype.getBottom=function(){var t=this.getY()+this.height;return{x:this.getX()+this.width/2,y:t}},s.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX(),y:t}},s.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width,y:t}},s.prototype.render=function(){if(this.next){var t=this.getAttr("line-length");if("right"===this.next_direction){var i=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(i.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+t);var e=this;!function i(){for(var r,s=!1,o=0,n=e.chart.symbols.length;n>o;o++){r=e.chart.symbols[o];var h=Math.abs(r.getCenter().x-e.next.getCenter().x);if(r.getCenter().y>e.next.getCenter().y&&h<=e.next.width/2){s=!0;break}}s&&(e.next.setX(r.getX()+r.width+t),i())}(),this.next.isPositioned=!0,this.next.render()}}else{var r=this.getBottom();this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+t),this.next.setX(r.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},s.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))},s.prototype.drawLineTo=function(t,r,s){this.connectedTo.indexOf(t)<0&&this.connectedTo.push(t);var o,n=this.getCenter().x,h=this.getCenter().y,a=(this.getTop(),this.getRight()),x=this.getBottom(),l=this.getLeft(),y=t.getCenter().x,g=t.getCenter().y,f=t.getTop(),p=t.getRight(),c=(t.getBottom(),t.getLeft()),d=n===y,u=h===g,m=g>h,b=h>g,w=n>y,v=y>n,k=0,_=this.getAttr("line-length"),B=this.getAttr("line-width");if(s&&"bottom"!==s||!d||!m)if(s&&"right"!==s||!u||!v)if(s&&"left"!==s||!u||!w)if(s&&"right"!==s||!d||!b)if(s&&"right"!==s||!d||!m)if(s&&"bottom"!==s||!w)if(s&&"bottom"!==s||!v)if(s&&"right"===s&&w)o=i(this.chart,a,[{x:a.x+_/2,y:a.y},{x:a.x+_/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.rightStart=!0,t.topEnd=!0,k=a.x+_/2;else if(s&&"right"===s&&v)o=i(this.chart,a,[{x:f.x,y:a.y},{x:f.x,y:f.y}],r),this.rightStart=!0,t.topEnd=!0,k=a.x+_/2;else if(s&&"bottom"===s&&d&&b)o=i(this.chart,x,[{x:x.x,y:x.y+_/2},{x:a.x+_/2,y:x.y+_/2},{x:a.x+_/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.bottomStart=!0,t.topEnd=!0,k=x.x+_/2;else if("left"===s&&d&&b){var A=l.x-_/2;c.x<l.x&&(A=c.x-_/2),o=i(this.chart,l,[{x:A,y:l.y},{x:A,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.leftStart=!0,t.topEnd=!0,k=l.x}else"left"===s&&(o=i(this.chart,l,[{x:f.x+(l.x-f.x)/2,y:l.y},{x:f.x+(l.x-f.x)/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.leftStart=!0,t.topEnd=!0,k=l.x);else o=i(this.chart,x,[{x:x.x,y:x.y+_/2},{x:x.x+(x.x-f.x)/2,y:x.y+_/2},{x:x.x+(x.x-f.x)/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.bottomStart=!0,t.topEnd=!0,k=x.x+(x.x-f.x)/2;else o=this.leftEnd&&b?i(this.chart,x,[{x:x.x,y:x.y+_/2},{x:x.x+(x.x-f.x)/2,y:x.y+_/2},{x:x.x+(x.x-f.x)/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r):i(this.chart,x,[{x:x.x,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.bottomStart=!0,t.topEnd=!0,k=x.x+(x.x-f.x)/2;else o=i(this.chart,a,[{x:a.x+_/2,y:a.y},{x:a.x+_/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.rightStart=!0,t.topEnd=!0,k=a.x+_/2;else o=i(this.chart,a,[{x:a.x+_/2,y:a.y},{x:a.x+_/2,y:f.y-_/2},{x:f.x,y:f.y-_/2},{x:f.x,y:f.y}],r),this.rightStart=!0,t.topEnd=!0,k=a.x+_/2;else o=i(this.chart,l,p,r),this.leftStart=!0,t.rightEnd=!0,k=p.x;else o=i(this.chart,a,c,r),this.rightStart=!0,t.leftEnd=!0,k=c.x;else o=i(this.chart,x,f,r),this.bottomStart=!0,t.topEnd=!0,k=x.x;if(o){for(var O=0,L=this.chart.lines.length;L>O;O++)for(var M=this.chart.lines[O].attr("path"),T=o.attr("path"),X=0,Y=M.length-1;Y>X;X++){var C=[];C.push(["M",M[X][1],M[X][2]]),C.push(["L",M[X+1][1],M[X+1][2]]);for(var S=C[0][1],E=C[0][2],z=C[1][1],P=C[1][2],j=0,R=T.length-1;R>j;j++){var F=[];F.push(["M",T[j][1],T[j][2]]),F.push(["L",T[j+1][1],T[j+1][2]]);var W,N=F[0][1],I=F[0][2],G=F[1][1],V=F[1][2],$=e(S,E,z,P,N,I,G,V);$.onLine1&&$.onLine2&&(I===V?N>G?(W=["L",$.x+2*B,I],T.splice(j+1,0,W),W=["C",$.x+2*B,I,$.x,I-4*B,$.x-2*B,I],T.splice(j+2,0,W),o.attr("path",T)):(W=["L",$.x-2*B,I],T.splice(j+1,0,W),W=["C",$.x-2*B,I,$.x,I-4*B,$.x+2*B,I],T.splice(j+2,0,W),o.attr("path",T)):I>V?(W=["L",N,$.y+2*B],T.splice(j+1,0,W),W=["C",N,$.y+2*B,N+4*B,$.y,N,$.y-2*B],T.splice(j+2,0,W),o.attr("path",T)):(W=["L",N,$.y-2*B],T.splice(j+1,0,W),W=["C",N,$.y-2*B,N+4*B,$.y,N,$.y+2*B],T.splice(j+2,0,W),o.attr("path",T)),j+=2)}}this.chart.lines.push(o)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&k>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=k)},f.inherits(o,s),f.inherits(n,s),f.inherits(h,s),f.inherits(a,s),f.inherits(x,s),x.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.textMargin,y:t}},x.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width-this.textMargin,y:t}},f.inherits(l,s),l.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var t=this.getAttr("line-length");if(this.bottom_symbol){var i=this.getBottom();this.bottom_symbol.getTop(),this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+t),this.bottom_symbol.setX(i.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var e=this.getRight();if(this.right_symbol.getLeft(),!this.right_symbol.isPositioned){this.right_symbol.setY(e.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+t);var r=this;!function i(){for(var e,s=!1,o=0,n=r.chart.symbols.length;n>o;o++){e=r.chart.symbols[o];var h=Math.abs(e.getCenter().x-r.right_symbol.getCenter().x);if(e.getCenter().y>r.right_symbol.getCenter().y&&h<=r.right_symbol.width/2){s=!0;break}}s&&(r.right_symbol.setX(e.getX()+e.width+t),i())}(),this.right_symbol.isPositioned=!0,this.right_symbol.render()}}},l.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)},y.parse=function(t){function i(t){var i=t.indexOf("(")+1,e=t.indexOf(")");return i>=0&&e>=0?s.symbols[t.substring(0,i-1)]:s.symbols[t]}function e(t){var i="next",e=t.indexOf("(")+1,r=t.indexOf(")");return e>=0&&r>=0&&(i=T.substring(e,r)).indexOf(",")<0&&"yes"!==i&&"no"!==i&&(i="next, "+i),i}t=(t=t||"").trim();for(var s={symbols:{},start:null,drawSVG:function(t,i){function e(t){if(g[t.key])return g[t.key];switch(t.symbolType){case"start":g[t.key]=new o(y,t);break;case"end":g[t.key]=new n(y,t);break;case"operation":g[t.key]=new h(y,t);break;case"inputoutput":g[t.key]=new x(y,t);break;case"subroutine":g[t.key]=new a(y,t);break;case"condition":g[t.key]=new l(y,t);break;default:return new Error("Wrong symbol type!")}return g[t.key]}var s=this;this.diagram&&this.diagram.clean();var y=new r(t,i);this.diagram=y;var g={};!function t(i,r,o){var n=e(i);return s.start===i?y.startWith(n):r&&o&&!r.pathOk&&(r instanceof l?(o.yes===i&&r.yes(n),o.no===i&&r.no(n)):r.then(n)),n.pathOk||(n instanceof l?(i.yes&&t(i.yes,n,i),i.no&&t(i.no,n,i)):i.next&&t(i.next,n,i)),n}(this.start),y.render()},clean:function(){this.diagram.clean()}},y=[],g=0,f=1,p=t.length;p>f;f++)if("\n"===t[f]&&"\\"!==t[f-1]){var c=t.substring(g,f);g=f+1,y.push(c.replace(/\\\n/g,"\n"))}g<t.length&&y.push(t.substr(g));for(var d=1,u=y.length;u>d;){var m=y[d];m.indexOf(": ")<0&&m.indexOf("(")<0&&m.indexOf(")")<0&&m.indexOf("->")<0&&m.indexOf("=>")<0?(y[d-1]+="\n"+m,y.splice(d,1),u--):d++}for(;y.length>0;){var b=y.splice(0,1)[0];if(b.indexOf("=>")>=0){var w,v=b.split("=>"),k={key:v[0],symbolType:v[1],text:null,link:null,target:null,flowstate:null};if(k.symbolType.indexOf(": ")>=0&&(w=k.symbolType.split(": "),k.symbolType=w[0],k.text=w[1]),k.text&&k.text.indexOf(":>")>=0?(w=k.text.split(":>"),k.text=w[0],k.link=w[1]):k.symbolType.indexOf(":>")>=0&&(w=k.symbolType.split(":>"),k.symbolType=w[0],k.link=w[1]),k.symbolType.indexOf("\n")>=0&&(k.symbolType=k.symbolType.split("\n")[0]),k.link){var _=k.link.indexOf("[")+1,B=k.link.indexOf("]");_>=0&&B>=0&&(k.target=k.link.substring(_,B),k.link=k.link.substring(0,_-1))}if(k.text&&k.text.indexOf("|")>=0){var A=k.text.split("|");k.text=A[0],k.flowstate=A[1].trim()}s.symbols[k.key]=k}else if(b.indexOf("->")>=0)for(var O=b.split("->"),L=0,M=O.length;M>L;L++){var T=O[L],X=i(T),Y=e(T),C=null;if(Y.indexOf(",")>=0){var S=Y.split(",");Y=S[0],C=S[1].trim()}if(s.start||(s.start=X),M>L+1){var E=O[L+1];X[Y]=i(E),X["direction_"+Y]=C,C=null}}}return s}}();